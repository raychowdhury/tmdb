<div class="movie-list-container">
  <!-- Search Bar -->
  <div class="search-bar">
    <input
      type="text"
      placeholder="Search for a movie..."
      [(ngModel)]="searchTerm"
      (input)="onSearch()"
    />
  </div>

  <!-- Search Results Section -->
  <div *ngIf="filteredMovies.length > 0 && searchTerm.trim().length > 0">
    <h2>Search Results</h2>
    <div class="movies-grid">
      <app-movie-card
        *ngFor="let movie of filteredMovies | slice: 0:10"
        [movie]="movie"
        [isInWatchlist]="watchlistMovieIds.has(movie.id)"
        (addMovie)="addMovie(movie)"
        (removeMovie)="removeMovie(movie)"
        (navigateToDetails)="goToMovieDetails(movie.id)"
      ></app-movie-card>
    </div>
  </div>


  <!-- Genre List Section -->
  <div *ngIf="filteredMovies.length === 0 && searchTerm.trim().length === 0">
    <div *ngFor="let genre of genres" class="genre-section">
      <h2>{{ genre.name }}</h2>
      <div class="movies-grid">
        <app-movie-card
          *ngFor="let movie of moviesByGenre[genre.name] | slice: 0:5"
          [movie]="movie"
          [isInWatchlist]="watchlistMovieIds.has(movie.id)"
          (addMovie)="addMovie(movie)"
          (removeMovie)="removeMovie(movie)"
          (navigateToDetails)="goToMovieDetails(movie.id)"
        ></app-movie-card>
      </div>
    </div>
  </div>

  <!-- Message Popup -->
  <div *ngIf="showMessage" class="message-popup">
    {{ message }}
  </div>
</div>
